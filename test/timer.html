<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Timer with Module</title>
  <link rel="stylesheet" href='/src/css/timer.css'>

  <script type="text/javascript" src="https://livejs.com/live.js"></script>

</head>

<body>
  <!-- Define the play button svg as a symbol -->
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="svg-play" viewBox="0 0 24 24">
      <!--  4, y: 2.000000238418579, width: 19.000024795532227, height: 19.999996185302734} -->
      <path
        d="M21.4086 9.35258C23.5305 10.5065 23.5305 13.4935 21.4086 14.6474L8.59662 21.6145C6.53435 22.736 4 21.2763 4 18.9671L4 5.0329C4 2.72368 6.53435 1.26402 8.59661 2.38548L21.4086 9.35258Z" />
    </symbol>
  </svg>
  <div id="qwe" class="timer-container" style="width: 200px; height: 200px; margin: auto;">
    <svg class="timer-not-playing" xmlns="http://www.w3.org/2000/svg">
      <use xlink:href="#svg-play"></use>
    </svg>
    <!-- 
    <svg id="timer-not-playing" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <path id="qwe"
      d="M21.4086 9.35258C23.5305 10.5065 23.5305 13.4935 21.4086 14.6474L8.59662 21.6145C6.53435 22.736 4 21.2763 4 18.9671L4 5.0329C4 2.72368 6.53435 1.26402 8.59661 2.38548L21.4086 9.35258Z" />
    </svg>
    -->
    <div class="timer-playing">
      <div class="compte-Ã -rebours"></div>
      <svg viewBox="4 4 92 92" xmlns="http://www.w3.org/2000/svg">
        <g transform="rotate(-90 50 50)">
          <circle id="innerCircle1" cx="50" cy="50" r="55" stroke="rgba(23, 63, 53, .25)" stroke-width="46" fill="none" />
          <circle id="innerCircle2" cx="50" cy="50" r="40" stroke="rgba(23, 63, 53, .666)" stroke-width="0" fill="none" />
        </g>
      </svg>
    </div>
  </div>

  <script type="module">
    import { Timer } from '/src/js/TimerClass.js'

    const onTimerReady = () => {
      console.log("Timer ready");
      // You can replace the alert with any other action you want to take when the timer ends
    };
    const onTimerTick = (f, t) => {
      console.log("Timer tick", t, f);
      // You can replace the alert with any other action you want to take when the timer ends
    };
    const onTimerExpire = () => {
      console.log("Timer has expired");
      // You can replace the alert with any other action you want to take when the timer ends
    };
    const onTimerClose = () => {
      console.log("Timer has ended");
      // You can replace the alert with any other action you want to take when the timer ends
    };

    const timer = new Timer(10, "qwe", onTimerReady, onTimerTick, onTimerExpire, onTimerClose);

    timer.loadResources().then(() =>
      timer.initializeAudio().then(() => {
        document.addEventListener("click", () => {
          if (timer.timerId != null) {
            timer.stop();
          } else {
            timer.initializeAudio().then(() => {
              timer.start();
            });
          }
        });
      })
    );
  </script>
</body>

</html>